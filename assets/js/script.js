jQuery(function(t){const e="shown",a="hidden",n=150,i="jsi-first-page",s="jsi-second-page",r="Invalid Date",D="https://maps.googleapis.com/maps/api/staticmap?";var o,E,c=t("#jsi-main-wrapper"),l=t("#jsi-first-page"),d=t("#jsi-open-trigger"),p=t("#jsi-second-page"),u=new Array,g=function(t){t.addClass(e)},f=function(t){t.removeClass(e)};t.getJSON("./assets/js/schedule.json",function(h){if(h.googleMapAPIKey)var S=h.googleMapAPIKey;$insertAppTitle=function(){t(".jsc-app-title").text(h.appTitle)},$insertTriggerText=function(){d.text(h.triggerText)},$fetchScheduleData=function(){u=h.schedules,u.sort(function(t,e){return t[SCHEDULE_D[1]]<e[SCHEDULE_D[1]]?-1:t[SCHEDULE_D[1]]>e[SCHEDULE_D[1]]?1:0})},$calculateMinimumAndMaximumDate=function(){for(var t=0;t<u.length;t++){var e=u[t];if(u[t][SCHEDULE_D[1]]=new Date(e[SCHEDULE_D[1]]),u[t][SCHEDULE_D[2]]=new Date(e[SCHEDULE_D[2]]),u[t].Day=WEEKDAY[e[SCHEDULE_D[1]].getDay()],u[t].Duration=u[t][SCHEDULE_D[2]]-u[t][SCHEDULE_D[1]],!u[t][SCHEDULE_D[0]])return alert("ERROR: Title in No."+(t+1)+"does not have any value."),!1;if(u[t][SCHEDULE_D[1]]==r||u[t][SCHEDULE_D[2]]==r)return alert("ERROR: you set wrong data / time in schedule No."+(t+1)+". Start and End value must be specified."),!1;if(u[t][SCHEDULE_D[1]]>u[t][SCHEDULE_D[2]])return alert('ERROR: you set earlier date as "Start" than "End" in schedule No.'+(t+1)),!1;(!o||o>u[t][SCHEDULE_D[1]])&&(o=u[t][SCHEDULE_D[1]]),(!E||E<u[t][SCHEDULE_D[2]])&&(E=u[t][SCHEDULE_D[2]])}},$insertDateTextsToFirstPage=function(){var e=WEEKDAY[o.getDay()]+" / "+MONTH_NAMES[o.getMonth()]+" "+o.getDate(),a=WEEKDAY[E.getDay()]+" / "+MONTH_NAMES[E.getMonth()]+" "+E.getDate();t("#jsi-from-date").text(e),t("#jsi-to-date").text(a)},$renderingBasicDOMs=function(){for(var t=Math.floor((E-o+1)/MS_PER_DAY)+1,e=new Date(o),a=0;t>a;a++){0!=a&&new Date(e.setDate(e.getDate()+1));var n=WEEKDAY[e.getDay()]+" / "+MONTH_NAMES[e.getMonth()]+" "+e.getDate()+" "+e.getFullYear(),i='<li class="cs-next" data-month="'+e.getMonth()+'" data-day="'+e.getDate()+'">';i+='<a href="javascript: void(0);">',i+="<dl>",i+="<dt>Day "+(a+1)+"</dt>",i+="<dd>"+n+"</dd>",i+="</dl>",i+="</a>",i+="</li>",l.find("ol").append(i);var i='<li data-month="'+e.getMonth()+'" data-day="'+e.getDate()+'">';i+="<h2>"+n+"</h2>",i+="<ul>",i+="</ul>",i+="</li>",p.find("ol").append(i)}},$renderingEachScheduleDetail=function(){for(var e=0;e<u.length;e++){var a=u[e];p.find("li").each(function(){var e=t(this);if(t(this).data(LIST_D[0])===a[[SCHEDULE_D[1]]].getMonth()&&t(this).data(LIST_D[1])===a[[SCHEDULE_D[1]]].getDate()){var n="";a[SCHEDULE_D[1]].getHours()<10&&(n+="0"),n+=a[SCHEDULE_D[1]].getHours(),n+=":",a[SCHEDULE_D[1]].getMinutes()<10&&(n+="0"),n+=a[SCHEDULE_D[1]].getMinutes();var i="";a[SCHEDULE_D[2]].getHours()<10&&(i+="0"),i+=a[SCHEDULE_D[2]].getHours(),i+=":",a[SCHEDULE_D[2]].getMinutes()<10&&(i+="0"),i+=a[SCHEDULE_D[2]].getMinutes();var s=(a[SCHEDULE_D[2]]-a[SCHEDULE_D[1]])/1e3/60,r='<li data-startTime="'+a[SCHEDULE_D[1]]+'" data-endTime="'+a[SCHEDULE_D[2]]+'" data-place="'+a[SCHEDULE_D[6]]+'">';r+='<p class="ps-blank">',r+="<span>blank time:</span>",r+='<span class="jsc-blank"></span>',r+='<a href="javascript: void(0);" class="jsc-root" target="_blank">root</a>',r+="</p>",r+="<h3>"+a[SCHEDULE_D[0]]+"</h3>",r+='<p class="ps-time"><time>'+n+"</time> - <time>"+i+"</time> ("+s+"mins)</p>",a[SCHEDULE_D[6]]&&(r+="<address>"+a[SCHEDULE_D[6]]+"</address>");var o=function(t,e,a,n,i,s){return D+"center="+t+"&zoom="+e+"&size="+a+"&markers="+n+"&sensor="+i+"&key="+s};S&&a[SCHEDULE_D[6]]&&(r+='<p class="ps-map">',r+='<img src="'+o(a[SCHEDULE_D[6]],14,"640x380",a[SCHEDULE_D[6]],!1,S)+'">',r+='<a href="https://www.google.co.jp/maps/place/'+a[SCHEDULE_D[6]]+'" target="_blank"></a>',r+="</p>"),a[SCHEDULE_D[5]]&&(r+='<p class="ps-description">'+a[SCHEDULE_D[5]]+"</p>"),r+="</li>",e.find("ul").append(r)}})}},$calculateBlankTimes=function(){t(".jsc-blank").each(function(){var e=t(this).parent("p").parent("li"),a=e.prev("li").attr("data-endTime"),n=e.attr("data-startTime");if(a&&n)var i=(new Date(n)-new Date(a))/1e3/60;else var i="-";t(this).text(i+" mins")})},$rootHrefDispatcher=function(){t(".jsc-root").each(function(){var e=t(this).parent("p").parent("li"),n=e.prev("li").attr("data-place"),i=e.attr("data-place");if(n&&i){const s="https://www.google.co.jp/maps/dir";var r=s+"/"+n+"/"+i;t(this).attr("href",r)}else t(this).addClass(a)})},$openFirstPage=function(){d.click(function(){setTimeout(function(){g(c)},n)})},$openSecondPage=function(){l.find("ol").find("li").click(function(){var a=t(this).data("month"),i=t(this).data("day");p.find("ol").find("li").each(function(){t(this).data("month")==a&&t(this).data("day")==i?t(this).addClass(e):t(this).removeClass(e)}),setTimeout(function(){g(p)},n)})},$backToPreviousPage=function(){t(".jsc-back").click(function(){var e=t(this).parent("p").parent("section").attr("id");e==i?setTimeout(function(){f(c)},n):e==s&&setTimeout(function(){f(p)},n)})},t(function(){$insertAppTitle(),$insertTriggerText(),$fetchScheduleData(),$calculateMinimumAndMaximumDate(),$insertDateTextsToFirstPage(),$renderingBasicDOMs(),$renderingEachScheduleDetail(),$calculateBlankTimes(),$rootHrefDispatcher(),$openFirstPage(),$openSecondPage(),$backToPreviousPage()})})});